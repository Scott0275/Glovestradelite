<!DOCTYPE html>
<html lang="en-uk" dir="ltr">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!-- Standard Meta -->
    <meta name="description" content="" />
    <meta name="keywords" content="investment, Forex, Trading, Bitcoin, Cryptocurrency, Global investment, Live Trade, Trading class, indics" />
    <meta name="author" content="Paul Hubweb &amp; Tech" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="theme-color" content="#000" />
    <!-- Site Properties -->
    <title>Sign In - Glove TradeLite</title>
    <link rel="shortcut icon" href="../assets/img/favicon.svg" type="image/x-icon" />
    <link rel="apple-touch-icon-precomposed" href="../assets/img/favicon.svg" />
    <!-- Stylesheet -->
    <link rel="stylesheet" href="assets/css/uikit.min.css" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/sweetalert2.css" />

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script src="../assets/js/firebase-config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body style="background-color: #0f101e; color: #fff" class="loaded">
    <!-- preloader begin -->
    <div class="in-loader">
        <div style="background-color: #44a08d"></div>
        <div style="background-color: #44a08d"></div>
        <div style="background-color: #44a08d"></div>
    </div>
    <!-- preloader end -->
    <main>
        <!-- section content begin -->
        <div class="uk-section uk-padding-remove-vertical">
            <div class="uk-container uk-container-expand">
                <div class="uk-grid" data-uk-height-viewport="expand: true">
                    <div class="uk-width-3-5@m uk-background-cover uk-background-center-right uk-visible@m uk-box-shadow-xlarge" style="background-image: url(assets/images/h.jpg)"></div>
                    <div class="uk-width-expand@m uk-flex uk-flex-middle">
                        <div class="uk-grid uk-flex-center">
                            <div class="uk-width-3-5@m">
                                <div class="in-padding-horizontal@s">
                                    <a href="../index.html" class="uk-logo">
                                        <img src="../assets/img/favicon.svg" alt="Glove TradeLite Logo" width="120" height="36" data-uk-img="" class="uk-margin-small-right in-offset-top-10" style="padding-top: 40px" />
                                    </a>
                                    <p class="uk-text-lead uk-margin-top uk-margin-remove-bottom">Log into your account</p>
                                    <p class="uk-text-small uk-margin-remove-top uk-margin-medium-bottom">
                                        Don't have an account?
                                        <a href="register.html"><b style="color: rgb(68, 160, 141);">Sign up here</b></a>
                                    </p>
                                    <form id="loginForm" class="uk-grid uk-form">
                                        <div class="uk-margin-small uk-width-1-1 uk-inline">
                                            <span class="uk-form-icon uk-form-icon-flip fas fa-envelope fa-sm"></span>
                                            <input id="email" type="email" placeholder="Email" required class="uk-input uk-border-rounded" style="background-color: rgb(255, 255, 255);" />
                                        </div>
                                        <div class="uk-margin-small uk-width-1-1 uk-inline">
                                            <span class="uk-form-icon uk-form-icon-flip fas fa-lock fa-sm"></span>
                                            <input id="password" type="password" placeholder="Password" required class="uk-input uk-border-rounded" style="background-color: rgb(255, 255, 255);" />
                                        </div>
                                        <div class="uk-margin-small uk-width-expand@m">
                                            <a href="forgot-password.html" class="uk-text-small">Forgot password?</a>
                                        </div>
                                        <div class="uk-margin-small uk-width-1-1">
                                            <button type="submit" id="btnLogin" class="uk-button uk-width-1-1 uk-button-primary uk-border-rounded uk-float-left" style="background-color: rgb(68, 160, 141);">
                                                Sign In
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- section content end -->
    </main>

    <script>
        // List of admin emails
        const adminEmails = ['oscarscott2411@gmail.com', 'admin@glovestrade.com'];

        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const btn = document.getElementById("btnLogin");

            if (!email || !password) {
                Swal.fire("Error", "Please enter both email and password.", "error");
                return;
            }

            btn.disabled = true;
            btn.innerHTML = 'Signing In...';

            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    
                if (adminEmails.includes(user.email)) {
                        Swal.fire("Success", "Admin login successful! Redirecting...", "success").then(() => {
                        window.location.href = '../admin_dashboard.php';
                        });
                } else {
                        Swal.fire("Success", "Login successful! Redirecting...", "success").then(() => {
                        window.location.href = '../dashboard.php';
                        });
                }
                })
                .catch((error) => {
                    Swal.fire("Login Failed", error.message, "error");
                })
                .finally(() => {
                    btn.disabled = false;
                    btn.innerHTML = 'Sign In';
                });
        });
    </script>
</body>
</html>